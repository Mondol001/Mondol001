<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firebase Data Entry App</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.min.css">
  <script type="module" defer>
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";

    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDjutN8p9j4XdAi_I_3-oWqiD1AbmdSdnM",
      authDomain: "online-data-6dcae.firebaseapp.com",
      projectId: "online-data-6dcae",
      storageBucket: "online-data-6dcae.firebasestorage.app",
      messagingSenderId: "848937873609",
      appId: "1:848937873609:web:51f1625a9ee7bf45bcdd18",
      measurementId: "G-41Q88XT5J5"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Form Submission
    document.addEventListener("DOMContentLoaded", () => {
      const orderForm = document.getElementById("orderForm");

      orderForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        const orderNo = document.getElementById("orderNo").value;
        const partyName = document.getElementById("partyName").value;
        const shadeNo = document.getElementById("shadeNo").value;
        const orderQty = document.getElementById("orderQty").value;
        const balQty = document.getElementById("balQty").value;
        const remarks = document.getElementById("remarks").value;

        try {
          await addDoc(collection(db, "orders"), {
            orderNo,
            partyName,
            shadeNo,
            orderQty,
            balQty,
            remarks,
          });
          alert("Data added successfully!");
          orderForm.reset();
          loadOrders();
        } catch (error) {
          console.error("Error adding document: ", error);
        }
      });

      // Load Orders
      async function loadOrders() {
        const querySnapshot = await getDocs(collection(db, "orders"));
        const orderList = document.getElementById("orderList");
        orderList.innerHTML = "";

        querySnapshot.forEach((doc) => {
          const order = doc.data();
          const orderItem = document.createElement("div");
          orderItem.textContent = `Order No: ${order.orderNo}, Party Name: ${order.partyName}, Shade No: ${order.shadeNo}, Order Qty: ${order.orderQty}, Bal Qty: ${order.balQty}, Remarks: ${order.remarks}`;
          orderList.appendChild(orderItem);
        });
      }

      loadOrders();
    });
  </script>
</head>
<body>
  <div class="container">
    <h1>Order Data Entry</h1>

    <form id="orderForm">
      <label for="orderNo">Order No:</label>
      <input type="text" id="orderNo" required />

      <label for="partyName">Party Name:</label>
      <input type="text" id="partyName" required />

      <label for="shadeNo">Shade No:</label>
      <input type="text" id="shadeNo" required />

      <label for="orderQty">Order Qty:</label>
      <input type="number" id="orderQty" required />

      <label for="balQty">Balance Qty:</label>
      <input type="number" id="balQty" required />

      <label for="remarks">Remarks:</label>
      <input type="text" id="remarks" required />

      <button type="submit">Submit</button>
    </form>

    <h2>Order List</h2>
    <div id="orderList"></div>
  </div>
</body>
</html>